<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://gdoyle87.github.io/COMP2801/wk_three/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Week 3 - Structures and typedef - COMP2801</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="https://cdn.jsdelivr.net/npm/asciinema-player@3.0.1/dist/bundle/asciinema-player.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Week 3 - Structures and typedef";
        var mkdocs_page_input_path = "wk_three.md";
        var mkdocs_page_url = "/COMP2801/wk_three/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> COMP2801
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../wk_one/">Week 1 - Formatted Output in C</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../wk_two/">Week 2 - scanf and Recursion</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Week 3 - Structures and typedef</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#structures">Structures</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#member-types">Member Types</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#defining-variables-of-structure-types">Defining Variables of Structure Types</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#structures-without-tag-names">Structures without Tag Names</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#comparing-structure-objects">Comparing Structure Objects</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="https://gdoyle87.github.io/COMP2701">COMP 2701</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="https://gdoyle87.github.io/">Other Notes</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">COMP2801</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Week 3 - Structures and typedef</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="week-3">Week 3</h1>
<p>This week covers <strong>structures</strong> and <strong>typedefs</strong>.</p>
<h2 id="structures">Structures</h2>
<p>A <strong>structure</strong> is a collection of related variables grouped under one name.
In the C standard, structures are referred to as <em>aggregates</em>.</p>
<p>The <code>struct</code> keyword is used to define a structure type:</p>
<pre><code class="language-c">// A structure for representing a playing card.
struct card {
    const char *face;
    const char *suit;
};  // Note: a semicolon is required after the closing brace.
</code></pre>
<p>The example above defines a new structure type named <code>card</code>.
The variables declared inside the braces (<code>face</code> and <code>suit</code>) are called <em>members</em>.</p>
<p>Since this type definition is a <em>declaration</em>, a semicolon must follow the 
closing brace.</p>
<h3 id="member-types">Member Types</h3>
<p>Structures can contain members of different types.
However, a structure cannot contain a member that is an instance of its own type.
For example, the following is invalid:</p>
<pre><code class="language-c">// Invalid: a structure cannot contain an instance of itself.
struct card {
    const char *face;
    const char *suit;
    struct card nextCard;  // Invalid
};
</code></pre>
<p>To work around this, use a pointer to the same type:</p>
<pre><code class="language-c">// Valid: a structure can contain a pointer to its own type.
struct card {
    const char *face;
    const char *suit;
    struct card *nextCard;  // Valid
};
</code></pre>
<p>This pattern is commonly used for creating nodes in a linked list.</p>
<h3 id="defining-variables-of-structure-types">Defining Variables of Structure Types</h3>
<p>Structure definitions alone only create a new <em>type</em> that can be used later in 
code; they do not reserve any space in memory. A structure definition is 
essentially a blueprint. To begin reserving memory for variables, use the 
following syntax:</p>
<pre><code class="language-c">// create a new card struct
struct card myCard;

// or create an array of card structs
struct card deck[52];

// or create a pointer to a card struct
struct card *cardPtr;
</code></pre>
<p>You can also create variables of a struct during the definition of the struct 
by providing a comma-separated list of variable names after the closing 
brace of the struct but before the ending semicolon of the declaration:</p>
<pre><code class="language-c">struct card {
    const char *face;
    const char *suit;
} myCard, deck[52], *cardPtr;
</code></pre>
<h3 id="structures-without-tag-names">Structures without Tag Names</h3>
<p>You can define a struct without a tag name:</p>
<pre><code class="language-c">struct {    // NOTE: no &quot;card&quot; tag name
    const char *face;
    const char *suit;
} exampleCard;
</code></pre>
<p>However, without a tag name, you cannot declare additional variables of this 
type later in the program. Therefore, you <em>must</em> provide variable names <em>during</em>
the declaration to use them.</p>
<hr>
<details><summary>Example</summary>


<pre><code class="language-c">// This defines and declares two variables immediately.
struct {
    int x;
    int y;
} point1, point2;
</code></pre>


</details>
<hr>

<h3 id="comparing-structure-objects">Comparing Structure Objects</h3>
<p>Structures <strong>cannot</strong> be compared using the operators <code>==</code> or <code>!=</code> because structure members may not be stored in consecutive bytes of memory. Compilers often insert padding bytes (known as <em>holes</em>) to align data members according to their type’s alignment requirements.</p>
<p>These holes can contain garbage values, which would cause comparisons between two otherwise identical structures to fail.</p>
<hr>

<details><summary>Example of holes</summary>

Suppose we have a struct defined as follows, with two variables of that type named <code>sample1</code> and <code>sample2</code>.


<pre><code class="language-c">struct example {
    char c;
    int i;
} sample1, sample2;
</code></pre>


Initially, the variables contain garbage values:

<img src="images/struct_gap1.png" alt="Initial garbage values" />

We then assign values to the members of <code>sample1</code>:


<pre><code class="language-c">sample1.c = 'G';
sample1.i = 42069;
</code></pre>


<img src="images/struct_gap2.png" alt="Assigned values in sample1" />

Notice that the <code>int</code> portion begins at byte 4. This is because integers *must* align on a 4-byte boundary, leaving a gap in bytes 1–3.

Next, we assign the same values to the members of <code>sample2</code>:


<pre><code class="language-c">sample2.c = 'G';
sample2.i = 42069;
</code></pre>


<img src="images/struct_gap3.png" alt="Assigned values in sample2" />

When comparing the two, the visible members appear equivalent, but the hidden padding bytes contain different values. Therefore, the two structs are **not** equal when compared byte-for-byte.

<img src="images/struct_gap4.png" alt="Mismatched padding bytes" />

</details>

<p><br></p>
<hr>

<details><summary>More about structure packing</summary>

When structures are stored in memory, the compiler may insert padding bytes
between members to align data according to hardware requirements.
This can improve performance but may waste space.

You can minimize wasted space by ordering structure members from largest to smallest type (for example, `double` -> `int` -> `char`).
Some compilers also support pragmas such as `#pragma pack` to control alignment,
though this is compiler-specific and should be used with caution.

</details>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../wk_two/" class="btn btn-neutral float-left" title="Week 2 - scanf and Recursion"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../wk_two/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/asciinema-player@3.0.1/dist/bundle/asciinema-player.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
