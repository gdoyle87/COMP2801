
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://gdoyle87.github.io/COMP2801/wk_four/">
      
      
        <link rel="prev" href="../wk_three/">
      
      
        <link rel="next" href="../wk_five/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Week 4 - Unions, Bit manipulations - COMP2801</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/asciinema-player@3.0.1/dist/bundle/asciinema-player.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#week-4" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="COMP2801" class="md-header__button md-logo" aria-label="COMP2801" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            COMP2801
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Week 4 - Unions, Bit manipulations
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="COMP2801" class="md-nav__button md-logo" aria-label="COMP2801" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    COMP2801
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../wk_one/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Week 1 - Formatted Output in C
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../wk_two/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Week 2 - scanf and Recursion
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../wk_three/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Week 3 - Structures and typedef
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Week 4 - Unions, Bit manipulations
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Week 4 - Unions, Bit manipulations
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#unions" class="md-nav__link">
    <span class="md-ellipsis">
      Unions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Unions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#declaring-a-union" class="md-nav__link">
    <span class="md-ellipsis">
      Declaring a union
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initializing-union-during-declaration" class="md-nav__link">
    <span class="md-ellipsis">
      Initializing union During Declaration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beyond-the-textbook-tagged-unions" class="md-nav__link">
    <span class="md-ellipsis">
      Beyond the Textbook: Tagged Unions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bitwise-operators" class="md-nav__link">
    <span class="md-ellipsis">
      Bitwise Operators
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bitwise Operators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bitwise-and" class="md-nav__link">
    <span class="md-ellipsis">
      Bitwise AND (&amp;)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bitwise-or" class="md-nav__link">
    <span class="md-ellipsis">
      Bitwise OR (|)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bitwise-xor" class="md-nav__link">
    <span class="md-ellipsis">
      Bitwise XOR (^)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#left-shift" class="md-nav__link">
    <span class="md-ellipsis">
      Left Shift (&lt;&lt;)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#right-shift" class="md-nav__link">
    <span class="md-ellipsis">
      Right Shift (&gt;&gt;)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bitwise-not" class="md-nav__link">
    <span class="md-ellipsis">
      Bitwise NOT (~)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beyond-the-textbook-common-bit-manipulation-techniques" class="md-nav__link">
    <span class="md-ellipsis">
      Beyond the Textbook: Common Bit Manipulation Techniques
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Beyond the Textbook: Common Bit Manipulation Techniques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-checking-if-a-number-is-even-or-odd" class="md-nav__link">
    <span class="md-ellipsis">
      1. Checking if a Number is Even or Odd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-swapping-two-numbers-without-a-temporary-variable" class="md-nav__link">
    <span class="md-ellipsis">
      2. Swapping Two Numbers Without a Temporary Variable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-checking-if-a-number-is-a-power-of-two" class="md-nav__link">
    <span class="md-ellipsis">
      3. Checking if a Number is a Power of Two
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-counting-set-bits-brian-kernighans-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      4. Counting Set Bits (Brian Kernighan’s Algorithm)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-clearing-or-setting-a-specific-bit" class="md-nav__link">
    <span class="md-ellipsis">
      5. Clearing or Setting a Specific Bit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-toggling-a-bit" class="md-nav__link">
    <span class="md-ellipsis">
      6. Toggling a Bit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-extracting-the-lowest-set-bit" class="md-nav__link">
    <span class="md-ellipsis">
      7. Extracting the Lowest Set Bit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-checking-if-two-integers-have-opposite-signs" class="md-nav__link">
    <span class="md-ellipsis">
      8. Checking if Two Integers Have Opposite Signs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../wk_five/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Week 5 - Linked Lists and Trees
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://gdoyle87.github.io/COMP2701" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    COMP 2701
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://gdoyle87.github.io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Other Notes
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="week-4">Week 4</h1>
<p>This week continued Chapter 10 and covered <strong>unions</strong> and <strong>bit manipulations</strong>. </p>
<hr>

<h2 id="unions">Unions</h2>
<p>Like a <code>struct</code>, a <code>union</code> is a derived data type. The difference is that <strong>all
members of a union occupy the same memory space</strong>.</p>
<p>This is helpful when different variables are only relevant at different times
during program execution. By combining them in a <code>union</code>, you can <strong>save
memory</strong> rather than allocating space for all members simultaneously.</p>
<p>In most cases, a <code>union</code> contains two or more items of <em>different</em> types. You
can access only <strong>one member (and therefore one type)</strong> at a time. It is the
programmer’s responsibility to reference the data with the proper type — using
the wrong one results in a logic error.</p>
<p>The <code>sizeof</code> a <code>union</code> is always equal to the size of its <strong>largest member
type</strong>.</p>
<hr>

<h3 id="declaring-a-union">Declaring a <code>union</code></h3>
<p>The declaration of a <code>union</code> is very similar to that of a <code>struct</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">union</span><span class="w"> </span><span class="nc">number</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w"> </span>
<span class="p">};</span>
</code></pre></div>
<p>As with a <code>struct</code>, defining a <code>union</code> only creates a new type; it does not
reserve memory until you declare variables of that type.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Union definitions are often placed in header files so they can be
reused across multiple source files that require access to the same type
definition.</p>
</div>
<hr>

<h3 id="initializing-union-during-declaration">Initializing <code>union</code> During Declaration</h3>
<p>You can initialize a variable of a union type during its declaration by
assigning a value to the <strong>first member type</strong> listed in the definition.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// &#39;number&#39; contains the following members in order: int x, double y</span>
<span class="k">union</span><span class="w"> </span><span class="nc">number</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">10</span><span class="p">};</span><span class="w"> </span><span class="c1">// assigns 10 to x</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you provide a value intended for a different member during initialization,
it will be converted to the first member type instead.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// &#39;number&#39; contains the following members in order: int x, double y</span>
<span class="k">union</span><span class="w"> </span><span class="nc">number</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">1.43</span><span class="p">};</span><span class="w"> </span><span class="c1">// assigns 1 to x instead of assigning 1.43 to y</span>
</code></pre></div>
</div>
<hr>

<h3 id="beyond-the-textbook-tagged-unions">Beyond the Textbook: Tagged Unions</h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following material was <strong>not covered in class (nor in this section of 
the text as far as I can tell)</strong> and is provided here for informational
purposes only.</p>
</div>
<p>While traditional unions allow multiple types to share the same memory space,
they provide <strong>no way to track which member is currently active</strong>. This makes
them error-prone for most applications.</p>
<p>A safer and more common modern pattern is the <strong>tagged union</strong> (also called a
<em>discriminated union</em>). A tagged union adds an explicit field, or <em>tag</em>, to
record which member of the union is currently valid.</p>
<p>This trades a bit of extra overhead for greater safety.</p>
<div class="highlight"><pre><span></span><code><span class="k">enum</span><span class="w"> </span><span class="n">ValueType</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">TYPE_INT</span><span class="p">,</span><span class="w"> </span><span class="n">TYPE_DOUBLE</span><span class="w"> </span><span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">Value</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">enum</span><span class="w"> </span><span class="n">ValueType</span><span class="w"> </span><span class="n">type</span><span class="p">;</span><span class="w">   </span><span class="c1">// the tag</span>
<span class="w">    </span><span class="k">union</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<p>This design lets programs safely determine which member to use:</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">Value</span><span class="w"> </span><span class="n">v</span><span class="p">;</span>
<span class="n">v</span><span class="p">.</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TYPE_DOUBLE</span><span class="p">;</span>
<span class="n">v</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.14</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">TYPE_DOUBLE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">d</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Tagged unions are common in modern C for representing values that may take
multiple forms, such as tokens in a compiler or event types in an input system.
They are safer and clearer than plain unions while still using shared memory
efficiently.</p>
</div>
<hr>

<h2 id="bitwise-operators">Bitwise Operators</h2>
<p>Computers represent all data internally as sequences of bits (0s and 1s). Each
bit can store one of two values, and groups of bits are used to represent
larger quantities. On most systems, eight bits form one byte — the typical
storage unit for a <code>char</code>.</p>
<p>Bitwise operators allow direct manipulation of individual bits within integer
values. These operations work on the binary representations of the operands and
are frequently used for low-level programming, such as hardware control,
encoding, and flag management.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Bitwise operations are typically applied to <strong>unsigned</strong> integers to avoid
ambiguity when dealing with sign bits and system-dependent right-shift
behavior.</p>
</div>
<hr>

<h3 id="bitwise-and">Bitwise AND (<code>&amp;</code>)</h3>
<p>Sets each bit in the result to 1 only if the corresponding bits in both
operands are 1.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 4-bit examples</span>
<span class="c1">//    1101  (13)</span>
<span class="c1">//  &amp; 1011  (11)</span>
<span class="c1">//  --------</span>
<span class="c1">//    1001  (9)</span>
</code></pre></div>
<h3 id="bitwise-or">Bitwise OR (<code>|</code>)</h3>
<p>Sets each bit in the result to 1 if at least one of the corresponding bits in
either operand is 1.</p>
<div class="highlight"><pre><span></span><code><span class="c1">//    1101  (13)</span>
<span class="c1">//  | 1011  (11)</span>
<span class="c1">//  --------</span>
<span class="c1">//    1111  (15)</span>
</code></pre></div>
<h3 id="bitwise-xor">Bitwise XOR (<code>^</code>)</h3>
<p>Sets each bit in the result to 1 only if the corresponding bits in the operands
differ.</p>
<div class="highlight"><pre><span></span><code><span class="c1">//    1101  (13)</span>
<span class="c1">//  ^ 1011  (11)</span>
<span class="c1">//  --------</span>
<span class="c1">//    0110  (6)</span>
</code></pre></div>
<h3 id="left-shift">Left Shift (<code>&lt;&lt;</code>)</h3>
<p>Moves bits to the left, filling with zeros from the right. Each left shift by 1
multiplies the number by 2.</p>
<div class="highlight"><pre><span></span><code><span class="c1">//    0101  (5)</span>
<span class="c1">//  &lt;&lt; 1</span>
<span class="c1">//  --------</span>
<span class="c1">//    1010  (10)</span>
</code></pre></div>
<h3 id="right-shift">Right Shift (<code>&gt;&gt;</code>)</h3>
<p>Moves bits to the right, discarding bits on the right. For unsigned values,
zeros are filled in from the left. Each right shift by 1 divides the number by
2 (integer division).</p>
<div class="highlight"><pre><span></span><code><span class="c1">//    1010  (10)</span>
<span class="c1">//  &gt;&gt; 1</span>
<span class="c1">//  --------</span>
<span class="c1">//    0101  (5)</span>
</code></pre></div>
<h3 id="bitwise-not">Bitwise NOT (<code>~</code>)</h3>
<p>Inverts each bit of the operand, turning 0s into 1s and 1s into 0s.</p>
<div class="highlight"><pre><span></span><code><span class="c1">//    0101  (5)</span>
<span class="c1">//  ~</span>
<span class="c1">//  --------</span>
<span class="c1">//    1010  (10 if only 4 bits are shown)</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In C, <code>~</code> inverts <strong>all</strong> bits in the operand, not just the visible ones. For
fixed-width integers like <code>uint8_t</code>, this means all 8 bits are inverted. When
printed as signed types, this can appear as a negative number.</p>
</div>
<h3 id="beyond-the-textbook-common-bit-manipulation-techniques">Beyond the Textbook: Common Bit Manipulation Techniques</h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following material was <strong>not covered in class (nor in this section of 
the text)</strong> and is provided here for informational purposes only.</p>
</div>
<p>Bit manipulation techniques are frequently used in competitive programming and
technical interviews (such as on LeetCode). These operations allow efficient
arithmetic and logical computations without relying on higher-level constructs.</p>
<p>Below are several common patterns, each explained with examples using 4-bit
binary values for clarity.</p>
<hr />
<h4 id="1-checking-if-a-number-is-even-or-odd">1. Checking if a Number is Even or Odd</h4>
<p>You can check the least significant bit (LSB) of a number using the bitwise AND
operator.</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Odd&quot;</span><span class="p">);</span>
<span class="k">else</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Even&quot;</span><span class="p">);</span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="c1">//   0101 (5)</span>
<span class="c1">// &amp; 0001</span>
<span class="c1">// ------</span>
<span class="c1">//   0001 -&gt; Odd</span>

<span class="c1">//   0110 (6)</span>
<span class="c1">// &amp; 0001</span>
<span class="c1">// ------</span>
<span class="c1">//   0000 -&gt; Even</span>
</code></pre></div>
<hr />
<h4 id="2-swapping-two-numbers-without-a-temporary-variable">2. Swapping Two Numbers Without a Temporary Variable</h4>
<p>This uses XOR to swap values in place.</p>
<div class="highlight"><pre><span></span><code><span class="n">a</span><span class="w"> </span><span class="o">^=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="n">b</span><span class="w"> </span><span class="o">^=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="n">a</span><span class="w"> </span><span class="o">^=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// a = 0101 (5)</span>
<span class="c1">// b = 0011 (3)</span>
<span class="c1">// Step 1: a = a ^ b -&gt; 0110</span>
<span class="c1">// Step 2: b = b ^ a -&gt; 0101</span>
<span class="c1">// Step 3: a = a ^ b -&gt; 0011</span>
<span class="c1">// Result: a = 3, b = 5</span>
</code></pre></div>
<hr />
<h4 id="3-checking-if-a-number-is-a-power-of-two">3. Checking if a Number is a Power of Two</h4>
<p>A number is a power of two if it has exactly one bit set.</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Power of 2&quot;</span><span class="p">);</span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="c1">//   x = 0100 (4)</span>
<span class="c1">// x-1 = 0011</span>
<span class="c1">// &amp; operation:</span>
<span class="c1">//   0100</span>
<span class="c1">// &amp; 0011 </span>
<span class="c1">//   ---- </span>
<span class="c1">//   0000 -&gt; true</span>
</code></pre></div>
<hr />
<h4 id="4-counting-set-bits-brian-kernighans-algorithm">4. Counting Set Bits (Brian Kernighan’s Algorithm)</h4>
<p>This algorithm repeatedly removes the lowest set bit until the number becomes
zero.</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="o">&amp;=</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="n">count</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// x = 1101 (13)</span>
<span class="c1">// 1101 -&gt; 1100 -&gt; 1000 -&gt; 0000</span>
<span class="c1">// count = 3</span>
</code></pre></div>
<hr />
<h4 id="5-clearing-or-setting-a-specific-bit">5. Clearing or Setting a Specific Bit</h4>
<p>To <strong>set</strong> a bit, use OR; to <strong>clear</strong> a bit, use AND with the complement of a
mask.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Set nth bit</span>
<span class="n">x</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">);</span>

<span class="c1">// Clear nth bit</span>
<span class="n">x</span><span class="w"> </span><span class="o">&amp;=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">);</span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// x = 0101, n = 1</span>
<span class="c1">// (1 &lt;&lt; 1) = 0010</span>
<span class="c1">// Set:   0101 | 0010 = 0111</span>
<span class="c1">// Clear: 0101 &amp; 1101 = 0101 (no change since that bit is already 0)</span>
</code></pre></div>
<hr />
<h4 id="6-toggling-a-bit">6. Toggling a Bit</h4>
<p>Flips the specified bit using XOR.</p>
<div class="highlight"><pre><span></span><code><span class="n">x</span><span class="w"> </span><span class="o">^=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">);</span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// x = 0101, n = 2</span>
<span class="c1">// (1 &lt;&lt; 2) = 0100</span>
<span class="c1">//   0101 </span>
<span class="c1">// ^ 0100 </span>
<span class="c1">//   ----</span>
<span class="c1">//   0001</span>
</code></pre></div>
<hr />
<h4 id="7-extracting-the-lowest-set-bit">7. Extracting the Lowest Set Bit</h4>
<p>Returns a number with only the lowest set bit of <code>x</code> preserved.</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">lowest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">-</span><span class="n">x</span><span class="p">;</span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// x = 1010</span>
<span class="c1">// -x (two’s complement) = 0110</span>
<span class="c1">//   1010 </span>
<span class="c1">// &amp; 0110 </span>
<span class="c1">//   ----</span>
<span class="c1">//   0010</span>
</code></pre></div>
<hr />
<h4 id="8-checking-if-two-integers-have-opposite-signs">8. Checking if Two Integers Have Opposite Signs</h4>
<p>Uses XOR to test the sign bit. The result will be negative if the signs differ.</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">x</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Opposite signs&quot;</span><span class="p">);</span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// x = +5 (0101), y = -3 (in 4-bit two’s complement: 1101)</span>
<span class="c1">// x ^ y = 1000 (negative)</span>
<span class="c1">// -&gt; Opposite signs</span>
</code></pre></div>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["toc.integrate", "navigation.expand", "navigation.sections"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/asciinema-player@3.0.1/dist/bundle/asciinema-player.js"></script>
      
        <script src="../js/ll_stepper.js"></script>
      
    
  </body>
</html>